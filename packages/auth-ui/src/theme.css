@import 'tw-animate-css';
@import '@daveyplate/better-auth-ui/css';

@custom-variant dark (&:is(.dark *));

/*
 * All auth-ui styles in named layer - user's unlayered CSS always wins
 * Layer order: base < neon-auth < components < utilities
 */
@layer neon-auth {
  /*
   * Variables scoped to wrapper class - NO :root pollution
   * Fallback chain: user's var -> auth-ui default
   */
  .neon-auth-ui {
    /* Design tokens */
    --neon-radius: 0.625rem;

    /* Colors - respect user's existing variables if defined */
    --neon-background: var(--background, oklch(1 0 0));
    --neon-foreground: var(--foreground, oklch(0.145 0 0));
    --neon-card: var(--card, oklch(1 0 0));
    --neon-card-foreground: var(--card-foreground, oklch(0.145 0 0));
    --neon-popover: var(--popover, oklch(1 0 0));
    --neon-popover-foreground: var(--popover-foreground, oklch(0.145 0 0));
    --neon-primary: var(--primary, oklch(0.205 0 0));
    --neon-primary-foreground: var(--primary-foreground, oklch(0.985 0 0));
    --neon-secondary: var(--secondary, oklch(0.97 0 0));
    --neon-secondary-foreground: var(--secondary-foreground, oklch(0.205 0 0));
    --neon-muted: var(--muted, oklch(0.97 0 0));
    --neon-muted-foreground: var(--muted-foreground, oklch(0.556 0 0));
    --neon-accent: var(--accent, oklch(0.97 0 0));
    --neon-accent-foreground: var(--accent-foreground, oklch(0.205 0 0));
    --neon-destructive: var(--destructive, oklch(0.577 0.245 27.325));
    --neon-destructive-foreground: var(
      --destructive-foreground,
      oklch(0.577 0.245 27.325)
    );
    --neon-border: var(--border, oklch(0.922 0 0));
    --neon-input: var(--input, oklch(0.922 0 0));
    --neon-ring: var(--ring, oklch(0.708 0 0));
    --neon-chart-1: var(--chart-1, oklch(0.646 0.222 41.116));
    --neon-chart-2: var(--chart-2, oklch(0.6 0.118 184.704));
    --neon-chart-3: var(--chart-3, oklch(0.398 0.07 227.392));
    --neon-chart-4: var(--chart-4, oklch(0.828 0.189 84.429));
    --neon-chart-5: var(--chart-5, oklch(0.769 0.188 70.08));
    --neon-sidebar: var(--sidebar, oklch(0.985 0 0));
    --neon-sidebar-foreground: var(--sidebar-foreground, oklch(0.145 0 0));
    --neon-sidebar-primary: var(--sidebar-primary, oklch(0.205 0 0));
    --neon-sidebar-primary-foreground: var(
      --sidebar-primary-foreground,
      oklch(0.985 0 0)
    );
    --neon-sidebar-accent: var(--sidebar-accent, oklch(0.97 0 0));
    --neon-sidebar-accent-foreground: var(
      --sidebar-accent-foreground,
      oklch(0.205 0 0)
    );
    --neon-sidebar-border: var(--sidebar-border, oklch(0.922 0 0));
    --neon-sidebar-ring: var(--sidebar-ring, oklch(0.708 0 0));

    /* Team colors - used for organization/team features */
    --neon-team-1: var(--team-1, oklch(0.646 0.222 41.116));
    --neon-team-2: var(--team-2, oklch(0.6 0.118 184.704));
    --neon-team-3: var(--team-3, oklch(0.398 0.07 227.392));
    --neon-team-4: var(--team-4, oklch(0.828 0.189 84.429));
    --neon-team-5: var(--team-5, oklch(0.769 0.188 70.08));
  }

  /* Dark mode - next-themes adds .dark class to parent (html/body) */
  .dark .neon-auth-ui {
    --neon-background: var(--background, oklch(0.145 0 0));
    --neon-foreground: var(--foreground, oklch(0.985 0 0));
    --neon-card: var(--card, oklch(0.205 0 0));
    --neon-card-foreground: var(--card-foreground, oklch(0.985 0 0));
    --neon-popover: var(--popover, oklch(0.205 0 0));
    --neon-popover-foreground: var(--popover-foreground, oklch(0.985 0 0));
    --neon-primary: var(--primary, oklch(0.922 0 0));
    --neon-primary-foreground: var(--primary-foreground, oklch(0.205 0 0));
    --neon-secondary: var(--secondary, oklch(0.269 0 0));
    --neon-secondary-foreground: var(--secondary-foreground, oklch(0.985 0 0));
    --neon-muted: var(--muted, oklch(0.269 0 0));
    --neon-muted-foreground: var(--muted-foreground, oklch(0.708 0 0));
    --neon-accent: var(--accent, oklch(0.269 0 0));
    --neon-accent-foreground: var(--accent-foreground, oklch(0.985 0 0));
    --neon-destructive: var(--destructive, oklch(0.704 0.191 22.216));
    --neon-destructive-foreground: var(
      --destructive-foreground,
      oklch(0.704 0.191 22.216)
    );
    --neon-border: var(--border, oklch(1 0 0 / 10%));
    --neon-input: var(--input, oklch(1 0 0 / 15%));
    --neon-ring: var(--ring, oklch(0.556 0 0));
    --neon-chart-1: var(--chart-1, oklch(0.488 0.243 264.376));
    --neon-chart-2: var(--chart-2, oklch(0.696 0.17 162.48));
    --neon-chart-3: var(--chart-3, oklch(0.769 0.188 70.08));
    --neon-chart-4: var(--chart-4, oklch(0.627 0.265 303.9));
    --neon-chart-5: var(--chart-5, oklch(0.645 0.246 16.439));
    --neon-sidebar: var(--sidebar, oklch(0.205 0 0));
    --neon-sidebar-foreground: var(--sidebar-foreground, oklch(0.985 0 0));
    --neon-sidebar-primary: var(--sidebar-primary, oklch(0.488 0.243 264.376));
    --neon-sidebar-primary-foreground: var(
      --sidebar-primary-foreground,
      oklch(0.985 0 0)
    );
    --neon-sidebar-accent: var(--sidebar-accent, oklch(0.269 0 0));
    --neon-sidebar-accent-foreground: var(
      --sidebar-accent-foreground,
      oklch(0.985 0 0)
    );
    --neon-sidebar-border: var(--sidebar-border, oklch(1 0 0 / 10%));
    --neon-sidebar-ring: var(--sidebar-ring, oklch(0.488 0.243 264.376));

    /* Team colors - same values work for dark mode */
    --neon-team-1: var(--team-1, oklch(0.488 0.243 264.376));
    --neon-team-2: var(--team-2, oklch(0.696 0.17 162.48));
    --neon-team-3: var(--team-3, oklch(0.769 0.188 70.08));
    --neon-team-4: var(--team-4, oklch(0.627 0.265 303.9));
    --neon-team-5: var(--team-5, oklch(0.645 0.246 16.439));
  }

  /*
   * Wrapper for CSS variable scoping
   * Uses display: contents to be invisible to layout
   */
  .neon-auth-ui {
    display: contents;
  }

  /*
   * Base styles for auth-ui components - scoped to wrapper
   * These are required by better-auth-ui components
   */
  .neon-auth-ui * {
    box-sizing: border-box;
    @apply border-border outline-ring/50;
  }

  /* Apply theme colors to the auth UI container */
  .neon-auth-ui {
    @apply text-foreground;
  }
}

/*
 * Tailwind theme mapping - kept at root level for build-time processing
 * Uses --neon-* prefixed variables internally
 */
@theme inline {
  --color-background: var(--neon-background);
  --color-foreground: var(--neon-foreground);
  --color-card: var(--neon-card);
  --color-card-foreground: var(--neon-card-foreground);
  --color-popover: var(--neon-popover);
  --color-popover-foreground: var(--neon-popover-foreground);
  --color-primary: var(--neon-primary);
  --color-primary-foreground: var(--neon-primary-foreground);
  --color-secondary: var(--neon-secondary);
  --color-secondary-foreground: var(--neon-secondary-foreground);
  --color-muted: var(--neon-muted);
  --color-muted-foreground: var(--neon-muted-foreground);
  --color-accent: var(--neon-accent);
  --color-accent-foreground: var(--neon-accent-foreground);
  --color-destructive: var(--neon-destructive);
  --color-destructive-foreground: var(--neon-destructive-foreground);
  --color-border: var(--neon-border);
  --color-input: var(--neon-input);
  --color-ring: var(--neon-ring);
  --color-chart-1: var(--neon-chart-1);
  --color-chart-2: var(--neon-chart-2);
  --color-chart-3: var(--neon-chart-3);
  --color-chart-4: var(--neon-chart-4);
  --color-chart-5: var(--neon-chart-5);
  --radius-sm: calc(var(--neon-radius) - 4px);
  --radius-md: calc(var(--neon-radius) - 2px);
  --radius-lg: var(--neon-radius);
  --radius-xl: calc(var(--neon-radius) + 4px);
  --color-sidebar: var(--neon-sidebar);
  --color-sidebar-foreground: var(--neon-sidebar-foreground);
  --color-sidebar-primary: var(--neon-sidebar-primary);
  --color-sidebar-primary-foreground: var(--neon-sidebar-primary-foreground);
  --color-sidebar-accent: var(--neon-sidebar-accent);
  --color-sidebar-accent-foreground: var(--neon-sidebar-accent-foreground);
  --color-sidebar-border: var(--neon-sidebar-border);
  --color-sidebar-ring: var(--neon-sidebar-ring);
  --color-team-1: var(--neon-team-1);
  --color-team-2: var(--neon-team-2);
  --color-team-3: var(--neon-team-3);
  --color-team-4: var(--neon-team-4);
  --color-team-5: var(--neon-team-5);
}
